<launch>
    <!-- marker_size in cm  default=20,0.02,0.02-->
    <arg name="marker_size" default="9" />
    <arg name="max_new_marker_error" default="0.1" />
    <arg name="max_track_error" default="0.01" />

    <arg name="camera_node_name" default="camera_0" />
    <arg name="camera_frame_id" default="$(arg camera_node_name)" />
    <arg name="image_width" default="640" />
    <arg name="image_height" default="480" />

    <!-- For 2nd and 3rd camera -->
    <arg name="camera_node_name1" default="camera_1" />
    <arg name="camera_frame_id1" default="$(arg camera_node_name1)" />


    <arg name="camera_node_name2" default="camera_2" />
    <arg name="camera_frame_id2" default="$(arg camera_node_name2)" />
    

    <!--<arg name="cam_image_topic" default="/$(arg camera_node_name)/image_raw" />-->
    <arg name="cam_info_topic" default="/$(arg camera_node_name)/camera_info" />
    <arg name="output_frame" default="$(arg camera_node_name)" />

        <!-- For 2nd and 3rd camera -->
    <arg name="cam_info_topic1" default="/$(arg camera_node_name1)/camera_info" />
    <arg name="output_frame1" default="$(arg camera_node_name1)" />

    <arg name="cam_info_topic2" default="/$(arg camera_node_name2)/camera_info" />
    <arg name="output_frame2" default="$(arg camera_node_name2)" />

    <!-- camera_frame_id must match the calibration filename pointed by calib_url -->
    <!-- <arg name="calib_url" default="file://$(env HOME)/.ros/camera_info/$(arg camera_frame_id).yaml" />
    <arg name="video_device" default="/dev/video0"/> -->
    
        <!-- Check if you need to change for more cameras -->




    <node

        pkg="ar_track_alvar"
        type="individualMarkersNoKinect"
        name="$(arg camera_node_name)_tracker"
        respawn="true"
        output="screen">

        <param name="marker_size"           type="double" value="$(arg marker_size)" />
        <param name="max_new_marker_error"  type="double" value="$(arg max_new_marker_error)" />
        <param name="max_track_error"       type="double" value="$(arg max_track_error)" />
        <param name="output_frame"          type="string" value="$(arg output_frame)" />

        <remap from="camera_image" to="camera_0/image_raw"/>
        <remap from="camera_info" to="camera_0/camera_info"/>
        <remap from="ar_pose_marker" to="$(arg camera_node_name)/ar_pose_marker"/>

    </node>

    <node

        pkg="ar_track_alvar"
        type="individualMarkersNoKinect"
        name="$(arg camera_node_name1)_tracker"
        respawn="true"
        output="screen">

        <param name="marker_size"           type="double" value="$(arg marker_size)" />
        <param name="max_new_marker_error"  type="double" value="$(arg max_new_marker_error)" />
        <param name="max_track_error"       type="double" value="$(arg max_track_error)" />
        <param name="output_frame"          type="string" value="$(arg output_frame1)" />

        <remap from="camera_image" to="camera_1/image_raw"/>
        <remap from="camera_info" to="camera_1/camera_info"/>
        <remap from="ar_pose_marker" to="$(arg camera_node_name1)/ar_pose_marker"/>

    </node>

    <node

        pkg="ar_track_alvar"
        type="individualMarkersNoKinect"
        name="$(arg camera_node_name2)_tracker"
        respawn="true"
        output="screen">

        <param name="marker_size"           type="double" value="$(arg marker_size)" />
        <param name="max_new_marker_error"  type="double" value="$(arg max_new_marker_error)" />
        <param name="max_track_error"       type="double" value="$(arg max_track_error)" />
        <param name="output_frame"          type="string" value="$(arg output_frame2)" />

        <remap from="camera_image" to="camera_2/image_raw"/>
        <remap from="camera_info" to="camera_2/camera_info"/>
        <remap from="ar_pose_marker" to="$(arg camera_node_name2)/ar_pose_marker"/>

    </node>   

    <!-- <node pkg="blimp_localization" type="globaltransform"
          name="listener" /> -->

    <node
        pkg="tf"
        type="static_transform_publisher"
        args="0.0 0.3 0.0 0.0 0.0 0 world camera_0 10"
        name="world2static_3"/> 

    <node
        pkg="tf"
        type="static_transform_publisher"
        args="0.0 0.3 0.0 0.0 0.0 0 world camera_1 10"
        name="world2static_4"/>  

     <node
        pkg="tf"
        type="static_transform_publisher"
        args="0.0 0.3 0.0 0.0 0.0 0 world camera_2 10"
        name="world2static_5"/>

    <!-- <node pkg="blimp_localization" type="transform_broadcast"
          args="/camera_0"   name="world2static"/>

    <node pkg="blimp_localization" type="transform_broadcast"
          args="/camera_1"   name="world2static_1"/>

        <node pkg="blimp_localization" type="transform_broadcast"
          args="/camera_2"   name="world2static_2"/> -->
</launch>
